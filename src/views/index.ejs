<!DOCTYPE html>
<html>
  <head>
    <title> Weather Alerts - Homepage</title>
  </head>
  <body>
    <%- include('partials/navbar') -%>
      <h1>Welcome to the Homepage :) </h1>
      <br>
      <form action="/login" method="post" id="login" autocomplete="off">
        Email:<br>
        <input type="text" name="email" required>
        <br>
        Password:<br>
        <input type="password" name="password" required>
        <br>
        <input id="long" name="longitude" hidden>
        <br>
        <input id="lat" name="latitude" hidden>
        <br>
        <br><br>
        <input type="submit" value="Submit">
      </form>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script type="text/javascript">
        // Stop form from submitting normally
        // event.preventDefault();
        let long;
        let lat;
        
        navigator.geolocation.getCurrentPosition(success, error, options)

        var options = {
          enableHighAccuracy: true,
          timeout: 5000,
          maximumAge: 0
        };

      function success(pos) {
        var crd = pos.coords;
        long = pos.coords.longitude;
        lat = pos.coords.latitude;
        console.log(`More or less ${crd.accuracy} meters.`);
        $.post(`/login`, {longitude: long, latitude: lat})
      }

      function error(err) {
        console.warn(`ERROR(${err.code}): ${err.message}`);
      }
   
      </script>
  </body>
</html>